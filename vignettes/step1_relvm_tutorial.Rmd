---
title: "Random Effect Latent Variable Model"
author: "Ren-Huai Huang"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


```{r test_170223}
require(rstarating); require(relvm);require(rclus)
set.seed(100)
x <- cms2016oct_input

object   <-  x <- mstbl(x)
# fitx   <-   relvm(x,groups="outcome_readm")
relvm(x)
fitx     <-   relvm(x,fit=list(init=unlist(list(mu=0,fl=0.85,err=0.85))))
fitx
# sr <- rating(fitx$groups$summary_score,iter.max = 110)
# fitx_app <- relvm_app(x)

# 
op <- out_dir("C:/rhuang/workspace/R/hospitalrating/inst/2016oct/r")
# saveRDS(fitx_app,file=file.path(op,"fitx_app20170418.rds"))
```

```{r dec2016}
x3 <- read.csv(system.file("/cms/dec2016/sas_input_2016dec.csv",package="cmsdata"))
x3o<- mstbl(x3)

relvm(x3o)
par = unlist(list(mu=rep(0,8),fl=rep(0.85,8),err=rep(0.8,8)))
fitx3 <- relvm(x3o)
fitx3
```

